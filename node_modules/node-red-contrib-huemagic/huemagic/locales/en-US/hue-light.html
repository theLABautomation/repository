<script type="text/x-red" data-help-name="hue-light">
    <p>Hue light node to control the lights and receive light bulb events.</p>

    <h3>Setup</h3>
    <p>Select the preconfigured Hue Bridge and hit the search button to find all available lights. Type in the name of the light manually or keep the default device name. Note that events will only be sent if the light bulb state is changed. If necessary, all status updates of this node can be ignored by activating the "Skip events" option.</p>

    <h3>Turn On / Off (simple)</h3>
    <p>Changes the light on / off state based on the passed in <b>msg.payload</b> values of:</p>
    <dl class="message-properties">
        <dt>msg.payload<span class="property-type">boolean</span></dt>
        <dd>Will turn on or turn off the light with its previous configuration (color and brightness)</dd>
    </dl>

    <h3>Turn On / Off (extended)</h3>
    <p>Changes the light state, effect, color and brightness based on the passed in <b>msg.payload</b> values of:</p>
    <dl class="message-properties">
        <dt class="optional">on<span class="property-type">boolean</span></dt>
        <dd>True to turn on the light bulb, false to turn it off</dd>

        <dt class="optional">brightness<span class="property-type">int</span></dt>
        <dd>Optionally configurable brightness of the light in percent (0-100)</dd>

        <dt class="optional">brightnessLevel<span class="property-type">int</span></dt>
        <dd>Optionally configurable brightness level of the light (0-254)</dd>

        <dt class="optional">incrementBrightness<span class="property-type">int</span></dt>
        <dd>Increment brightness by given percentage value</dd>

        <dt class="optional">decrementBrightness<span class="property-type">int</span></dt>
        <dd>Decrement brightness by given percentage value</dd>

        <dt class="optional">rgb<span class="property-type">array[int,int,int]</span></dt>
        <dd>Optionally configurable RGB color value of the light bulb. You don't need to pass the RGB value if you already passed a HEX value</dd>

        <dt class="optional">hex<span class="property-type">string</span></dt>
        <dd>Optionally configurable HEX color value of the light bulb. You don't need to pass the HEX value if you already passed a RGB value</dd>

        <dt class="optional">color<span class="property-type">string</span></dt>
        <dd>Optionally configurable human readable color name in english like "red" or "random" for a random color</dd>

        <dt class="optional">image<span class="property-type">string</span></dt>
        <dd>Optionally configurable image path (remote or local) to apply the most dominant color to the light</dd>

        <dt class="optional">transitionTime<span class="property-type">float</span></dt>
        <dd>Optionally configurable temporary value which eases transition of an effect (value in seconds, 0 for instant, 5 for five seconds)</dd>

        <dt class="optional">colorloop<span class="property-type">float</span></dt>
        <dd>Optionally configurable color loop effect. Value in seconds (deactivates the effect to the previous state after x seconds)</dd>

        <dt class="optional">colorTemp<span class="property-type">int</span></dt>
        <dd>Optionally configurable color temperature of the light from 153 to 500</dd>

        <dt class="optional">incrementColorTemp<span class="property-type">int</span></dt>
        <dd>Increment/decrement color temperature by given value</dd>

        <dt class="optional">saturation<span class="property-type">int</span></dt>
        <dd>Optionally configurable color saturation of the light in percent (from 0 to 100)</dd>
    </dl>

    <h3>Toggle On / Off (auto)</h3>
    <p>Turns the light on or off depending on the current state based on the passed in <b>msg.payload</b> value of:</p>
    <dl class="message-properties">
        <dt>toggle<span class="property-type">any</span></dt>
        <dd>Will turn on or turn off the light with the previous configuration (color and brightness)</dd>
    </dl>

    <h3>Alert Effect</h3>
    <p>Plays an alert effect based on the passed in <b>msg.payload</b> values of:</p>
    <dl class="message-properties">
        <dt>alert<span class="property-type">int</span></dt>
        <dd>Configurable amount of seconds to play the alert effect (max 30). When the alert effect is finished the light bulb will reset to the previous state.</dd>

        <dt class="optional">rgb<span class="property-type">array[int,int,int]</span></dt>
        <dd>Optionally configurable RGB color value of the alert effect. You don't need to pass the RGB value if you already passed a HEX value</dd>

        <dt class="optional">hex<span class="property-type">string</span></dt>
        <dd>Optionally configurable HEX color value of the alert effect. You don't need to pass the HEX value if you already passed a RGB value</dd>

        <dt class="optional">color<span class="property-type">string</span></dt>
        <dd>Optionally configurable human readable color name in english like "red" or "random" for a random color</dd>
    </dl>

    <h3>Light Events</h3>
    <p>The event message that the light bulb sends contains the following data in the <b>msg.payload</b> object:</p>
    <dl class="message-properties">
        <dt>on<span class="property-type">boolean</span></dt>
        <dd>True for on, false for off</dd>

        <dt>brightness<span class="property-type">int</span></dt>
        <dd>Current brightness of the light bulb in percent</dd>

        <dt>brightnessLevel<span class="property-type">int</span></dt>
        <dd>Current brightness level of the light bulb (0-254)</dd>

        <dt class="optional">rgb<span class="property-type">array[int,int,int]</span></dt>
        <dd>Current RGB color value of the light bulb (if supported)</dd>

        <dt class="optional">hex<span class="property-type">string</span></dt>
        <dd>Current HEX color value of the light bulb (if supported)</dd>

        <dt class="optional">color<span class="property-type">string</span></dt>
        <dd>Current color name of the light bulb (if supported)</dd>

        <dt class="optional">colorTemp<span class="property-type">int</span></dt>
        <dd>Current color temperature of the light (if supported)</dd>

        <dt>updated<span class="property-type">ISO 8601 date string</span></dt>
        <dd>ISO 8601 date string of the last light state update</dd>
    </dl>

    <h3>Additional Light Bulb Info</h3>
    <p>Additional information about the light bulb is going to be sent to the <b>msg.info</b> object:</p>
    <dl class="message-properties">
        <dt>id<span class="property-type">int</span></dt>
        <dd>Numerical id of the light as registered on the bridge</dd>

        <dt>uniqueId<span class="property-type">string</span></dt>
        <dd>Unique Id of the light (typically hardware id)</dd>

        <dt>name<span class="property-type">string</span></dt>
        <dd>Name for the light</dd>

        <dt>type<span class="property-type">string</span></dt>
        <dd>Type of light (e.g. Extended Color Light, Dimmable Light)</dd>

        <dt>softwareVersion<span class="property-type">float</span></dt>
        <dd>Software version of the light</dd>

        <dt>model<span class="property-type">object</span></dt>
        <dd>The model object of the light includes model specific information like the model.id, model.manufacturer, model.name, model.type, model.colorGamut and model.friendsOfHue</dd>
    </dl>

    <h3>Universal Mode (optional)</h3>
    <p>Defines the light Id on the Hue Bridge manually if not configured in the node properties (deactivates light update events):</p>
    <dl class="message-properties">
        <dt>msg.topic<span class="property-type">int</span></dt>
        <dd>Manual definition of the light bulb Id</dd>
    </dl>
</script>